<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
    <title>Dashboard</title>

    <!-- PWA & Mobile Capable -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#f8f9fa" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0a0a0b" media="(prefers-color-scheme: dark)">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1"
        rel="stylesheet" />

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "bg-light": "#f8f9fa",
                        "bg-dark": "#0a0a0b",
                        "card-light": "rgba(255, 255, 255, 0.6)",
                        "card-dark": "rgba(20, 20, 20, 0.6)",
                        "border-light": "rgba(0, 0, 0, 0.05)",
                        "border-dark": "rgba(255, 255, 255, 0.05)",
                    },
                    fontFamily: {
                        sans: ["Inter", "sans-serif"],
                    },
                    letterSpacing: {
                        'anime': '0.4em',
                    },
                    animation: {
                        'fade-in': 'fadeIn 1s ease-out forwards',
                        'float': 'float 8s ease-in-out infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                },
            },
        }
    </script>

    <style>
        /* Firefox Scrollbar & Aesthetic Sync */
        html,
        body {
            scrollbar-width: none;
            -ms-overflow-style: none;
            height: 100%;
        }

        body::-webkit-scrollbar {
            display: none;
        }

        /* Mozilla Specifics */
        input,
        button {
            -moz-appearance: none;
        }

        /* View Transition */
        ::view-transition-old(root),
        ::view-transition-new(root) {
            animation: none;
            mix-blend-mode: normal;
        }

        ::view-transition-image-pair(root) {
            isolation: isolate;
        }

        /* Custom Utilities */
        .glass-card {
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        /* Edit Mode Styles */
        body.is-editing .link-card {
            border-style: dashed;
            border-color: rgba(239, 68, 68, 0.5);
            cursor: alias;
        }

        body.is-editing .link-card:hover {
            border-color: rgba(239, 68, 68, 1);
            background: rgba(239, 68, 68, 0.05);
        }

        /* Canvas Particle Layer */
        #particles-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0.6;
        }
    </style>
</head>

<body
    class="bg-bg-light dark:bg-bg-dark text-gray-800 dark:text-gray-200 transition-colors duration-500 overflow-x-hidden selection:bg-gray-800 selection:text-white dark:selection:bg-white dark:selection:text-black">

    <!-- Particle Background -->
    <canvas id="particles-canvas"></canvas>

    <!-- Main Container -->
    <div class="relative z-10 flex flex-col min-h-screen max-w-7xl mx-auto px-6 md:px-12 py-6 pt-8 md:pt-12">

        <!-- Header -->
        <header class="flex justify-between items-center w-full mb-12 md:mb-16">
            <!-- Theme Toggle -->
            <button id="theme-toggle"
                class="p-2 rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-all duration-300 group">
                <span class="material-symbols-outlined text-[24px] group-hover:rotate-12 transition-transform">
                    change_circle
                </span>
            </button>

            <!-- Google Account Avatar -->
            <a href="https://myaccount.google.com/" target="_blank"
                class="block relative group size-10 md:size-12 overflow-hidden rounded-full border border-gray-200 dark:border-gray-800 hover:border-gray-400 dark:hover:border-gray-600 transition-colors">
                <img src="https://ui-avatars.com/api/?name=User&background=random&color=fff&size=128" alt="Profile"
                    class="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity"
                    id="profile-img">
            </a>
        </header>

        <!-- Hero Section -->
        <main class="flex-grow flex flex-col items-center w-full">

            <!-- Clock -->
            <div class="text-center mb-10 animate-fade-in">
                <h1 id="clock"
                    class="text-7xl md:text-9xl font-extralight tracking-tight text-gray-900 dark:text-white leading-none select-none transition-all">
                    00:00
                </h1>
                <p id="date"
                    class="mt-4 text-xs md:text-sm font-medium tracking-anime uppercase text-gray-500 dark:text-gray-400 select-none">
                    LOADING DATE...
                </p>
            </div>

            <!-- Search Bar -->
            <div class="w-full max-w-lg mb-16 animate-fade-in" style="animation-delay: 0.2s;">
                <form action="https://www.google.com/search" method="GET" class="relative group">
                    <div class="absolute inset-y-0 left-0 flex items-center pl-5 pointer-events-none">
                        <span
                            class="material-symbols-outlined text-gray-400 dark:text-gray-600 transition-colors group-focus-within:text-gray-800 dark:group-focus-within:text-gray-200">search</span>
                    </div>
                    <input type="text" name="q" placeholder="Search..." autocomplete="off"
                        class="w-full h-14 pl-14 pr-6 bg-card-light dark:bg-card-dark border border-border-light dark:border-border-dark rounded-2xl glass-card text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-300 dark:focus:ring-gray-700 transition-all duration-300 shadow-sm hover:shadow-md focus:shadow-lg text-lg font-light">
                </form>
            </div>

            <!-- Categories Grid (Original Layout Restored) -->
            <div id="categories-grid"
                class="w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 animate-fade-in pb-24"
                style="animation-delay: 0.4s;">
                <!-- Categories and Links injected by JS -->
            </div>

        </main>
    </div>

    <!-- Edit Fab -->
    <button id="edit-toggle"
        class="fixed bottom-6 right-6 md:bottom-10 md:right-10 z-50 size-14 rounded-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 shadow-2xl flex items-center justify-center hover:scale-110 transition-transform duration-300">
        <span class="material-symbols-outlined text-[24px]">edit</span>
    </button>

    <!-- Logic -->
    <script>
        // --- 1. CONFIG & STATE ---
        const defaultCategories = [
            {
                title: "Work",
                icon: "grid_view",
                items: [
                    { name: "Gmail", url: "https://gmail.com", icon: "mail" },
                    { name: "Slack", url: "https://slack.com", icon: "chat" },
                    { name: "Notion", url: "https://notion.so", icon: "description" },
                ]
            },
            {
                title: "Social",
                icon: "public",
                items: [
                    { name: "Twitter", url: "https://twitter.com", icon: "tag" },
                    { name: "Discord", url: "https://discord.com", icon: "forum" },
                    { name: "Instagram", url: "https://instagram.com", icon: "photo_camera" },
                    { name: "Reddit", url: "https://reddit.com", icon: "group" },
                ]
            },
            {
                title: "Media",
                icon: "play_circle",
                items: [
                    { name: "YouTube", url: "https://youtube.com", icon: "movie" },
                    { name: "Spotify", url: "https://open.spotify.com", icon: "headphones" },
                    { name: "Netflix", url: "https://netflix.com", icon: "tv" },
                ]
            },
            {
                title: "Tools",
                icon: "terminal",
                items: [
                    { name: "GitHub", url: "https://github.com", icon: "code" },
                    { name: "ChatGPT", url: "https://chat.openai.com", icon: "smart_toy" },
                    { name: "Figma", url: "https://figma.com", icon: "brush" },
                    { name: "Vercel", url: "https://vercel.com", icon: "rocket_launch" },
                ]
            }
        ];

        // Load from LocalStorage or use Default
        let categories = JSON.parse(localStorage.getItem('dashboardCategories')) || defaultCategories;

        const grid = document.getElementById('categories-grid');
        const editBtn = document.getElementById('edit-toggle');
        const editIcon = editBtn.querySelector('span');
        let isEditing = false;

        // --- 2. RENDER LOGIC ---
        function renderDashboard() {
            grid.innerHTML = '';

            categories.forEach((cat, catIndex) => {
                // Column Container
                const column = document.createElement('div');
                column.className = "flex flex-col gap-4 group/col";

                // Column Header
                const header = document.createElement('div');
                header.className = "flex items-center justify-between px-1 pb-2 border-b border-border-light dark:border-border-dark group-hover/col:border-gray-400 dark:group-hover/col:border-gray-600 transition-colors duration-500 mb-2";
                header.innerHTML = `
                    <h2 class="text-[10px] font-bold tracking-anime uppercase text-gray-500 dark:text-gray-500 group-hover/col:text-gray-900 dark:group-hover/col:text-gray-300 transition-colors">
                        ${cat.title}
                    </h2>
                    <span class="material-symbols-outlined text-[16px] text-gray-400 dark:text-gray-600 group-hover/col:text-gray-600 dark:group-hover/col:text-gray-400 transition-colors opacity-50 group-hover/col:opacity-100">
                        ${cat.icon}
                    </span>
                `;
                column.appendChild(header);

                // Links List
                const list = document.createElement('div');
                list.className = "space-y-3";

                cat.items.forEach((item, itemIndex) => {
                    const card = document.createElement(isEditing ? 'div' : 'a');
                    card.className = "link-card relative flex items-center gap-3 p-3 rounded-lg border border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark glass-card hover:bg-white/80 dark:hover:bg-white/10 transition-all duration-300 cursor-pointer select-none group/card";

                    if (!isEditing) {
                        card.href = item.url;
                        card.target = "_blank";
                    } else {
                        card.onclick = () => editItem(catIndex, itemIndex);
                    }

                    card.innerHTML = `
                        <span class="material-symbols-outlined text-[18px] text-gray-400 group-hover/card:text-gray-900 dark:group-hover/card:text-white transition-colors">
                            ${item.icon || 'link'}
                        </span>
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300 group-hover/card:text-black dark:group-hover/card:text-white truncate">
                            ${item.name}
                        </span>
                        ${isEditing ? '<div class="absolute right-3 top-1/2 -translate-y-1/2 text-red-500"><span class="material-symbols-outlined text-[14px]">edit</span></div>' : ''}
                    `;
                    list.appendChild(card);
                });

                // "Add New" Button (Only in Edit Mode)
                if (isEditing) {
                    const addBtn = document.createElement('button');
                    addBtn.className = "w-full py-2 border border-dashed border-gray-300 dark:border-gray-700 rounded-lg text-xs font-bold uppercase tracking-widest text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:border-gray-400 dark:hover:border-gray-500 transition-all flex items-center justify-center gap-2 opacity-60 hover:opacity-100";
                    addBtn.innerHTML = '<span class="material-symbols-outlined text-[14px]">add</span> ADD';
                    addBtn.onclick = () => addNewItem(catIndex);
                    list.appendChild(addBtn);
                }

                column.appendChild(list);
                grid.appendChild(column);
            });

            // Global Reset Button (Only in Edit Mode)
            if (isEditing) {
                const resetWrapper = document.createElement('div');
                resetWrapper.className = "col-span-full flex justify-center mt-8";
                resetWrapper.innerHTML = `
                    <button onclick="resetDefaults()" class="text-xs text-red-400 hover:text-red-600 uppercase tracking-anime border-b border-transparent hover:border-red-500 transition-all pb-1">
                        Reset Layout to Defaults
                    </button>
                `;
                grid.appendChild(resetWrapper);
            }
        }

        // --- 3. EDIT ACTIONS ---
        function editItem(catIndex, itemIndex) {
            const item = categories[catIndex].items[itemIndex];
            const newName = prompt("Edit Name:", item.name);
            if (newName === null) return;
            const newUrl = prompt("Edit URL:", item.url);
            if (newUrl === null) return;

            // Allow deleting by clearing name
            if (newName.trim() === "") {
                if (confirm("Delete this link?")) {
                    categories[catIndex].items.splice(itemIndex, 1);
                }
            } else {
                categories[catIndex].items[itemIndex] = { ...item, name: newName, url: newUrl };
            }
            saveState();
        }

        function addNewItem(catIndex) {
            const name = prompt("New Link Name:");
            if (!name) return;
            const url = prompt("New Link URL:", "https://");

            categories[catIndex].items.push({
                name,
                url: url || "#",
                icon: "public" // Default icon
            });
            saveState();
        }

        function resetDefaults() {
            if (confirm("Reset everything to default layout?")) {
                categories = JSON.parse(JSON.stringify(defaultCategories)); // Deep copy default
                saveState();
            }
        }

        function saveState() {
            localStorage.setItem('dashboardCategories', JSON.stringify(categories));
            renderDashboard();
        }

        // Toggle Edit Mode
        editBtn.addEventListener('click', () => {
            isEditing = !isEditing;
            document.body.classList.toggle('is-editing', isEditing);
            editIcon.innerText = isEditing ? 'check' : 'edit';
            editBtn.classList.toggle('bg-green-600', isEditing);
            editBtn.classList.toggle('dark:bg-green-500', isEditing);
            editBtn.classList.toggle('bg-gray-900', !isEditing);
            renderDashboard();
        });

        // --- 4. CLOCK ---
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' });
            document.getElementById('clock').innerText = timeStr;
            const dateStr = now.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' });
            document.getElementById('date').innerText = dateStr.toUpperCase();
        }
        setInterval(updateTime, 1000);
        updateTime();

        // --- 5. THEME TOGGLE ---
        document.getElementById('theme-toggle').addEventListener('click', (event) => {
            const toggleTheme = () => document.documentElement.classList.toggle('dark');
            if (!document.startViewTransition) { toggleTheme(); return; }

            const x = event.clientX;
            const y = event.clientY;
            const endRadius = Math.hypot(Math.max(x, innerWidth - x), Math.max(y, innerHeight - y));

            const transition = document.startViewTransition(toggleTheme);
            transition.ready.then(() => {
                const clipPath = [
                    `circle(0px at ${x}px ${y}px)`,
                    `circle(${endRadius}px at ${x}px ${y}px)`,
                ];
                document.documentElement.animate(
                    { clipPath: document.documentElement.classList.contains('dark') ? clipPath : [...clipPath].reverse() },
                    { duration: 600, easing: 'ease-out', pseudoElement: document.documentElement.classList.contains('dark') ? '::view-transition-new(root)' : '::view-transition-old(root)' },
                );
            });
        });

        // --- 6. PARTICLES ---
        const canvas = document.getElementById('particles-canvas');
        const ctx = canvas.getContext('2d');
        let width, height, particles = [];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            initParticles();
        }
        class Particle {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.vx = (Math.random() - 0.5) * 0.3;
                this.vy = (Math.random() - 0.5) * 0.3;
                this.size = Math.random() * 1.5 + 0.5;
                this.alpha = Math.random() * 0.5 + 0.1;
            }
            update() {
                this.x += this.vx; this.y += this.vy;
                if (this.x < 0) this.x = width; if (this.x > width) this.x = 0;
                if (this.y < 0) this.y = height; if (this.y > height) this.y = 0;
            }
            draw() {
                ctx.fillStyle = document.documentElement.classList.contains('dark') ? `rgba(255, 255, 255, ${this.alpha})` : `rgba(0, 0, 0, ${this.alpha * 0.5})`;
                ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
            }
        }
        function initParticles() {
            particles = [];
            const count = Math.floor((width * height) / 15000);
            for (let i = 0; i < count; i++) particles.push(new Particle());
        }
        function animateParticles() {
            ctx.clearRect(0, 0, width, height);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animateParticles);
        }
        window.addEventListener('resize', resize);
        resize();
        animateParticles();
        // Render Initial
        renderDashboard();
    </script>
</body>

</html>